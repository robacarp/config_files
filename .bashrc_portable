#include this file in .bashrc like this:
#echo -e "\tIncluding Rob Standard Includes"
#if [ -f ~/.bashrc_portable ]; then
#  . ~/.bashrc_portable
#  echo -e "\t (RSI success)"
#else
#  echo -e "\t (no .bashrc_portable file found)"
#fi

alias l="\ls"
alias md="mkdir"
alias r="rails"
alias rs="rails server --debug"
alias rc="rails console --debug"
alias ack="ack-grep"
alias g="git"
alias gs="git status"
alias irc="irssi"
alias go="ssh"
alias cld="cd \`\ls -t | head -n1\`"  #cd into the directory with the newest timestamp
alias vlf="vi $(\ls -t | head -n1)"   #open the file with the newest timestamp in the directory
alias axel="axel -a"
alias laxel="\axel -a -s 2097152"

#system specific aliases
uname=$(uname -a)
if [[ $uname =~ ^Linux ]]; then
  echo "detected linux"
  alias ls="\ls -la --color=auto"
  alias ll="\ls -l --color=auto"
elif [[ $uname =~ ^Darwin ]]; then
  echo "detected darwin"
  alias ls="\ls -la -G"
  alias ll="\ls -l -G"
else
  echo "could not detect operating system"
fi


cs () { cd "$1" && ls; }                #cd then ls

PS1='\[\e]0;\u@\h: \w\a\]\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '

screen -x

##################################################################################
#
# Open a file in a vim session, use sudo if needed.
#
vib() {
  if test -w $1; then
    vim $1
  else
    sudo vim $1
  fi
}

#
# For use when resuming remote screen session to re-sync
# ssh agent, and thus keys push through the new ssh session
# and make them available to shells running inside of screen
#
# Run before connecting to screen to dump env vars to a file,
# then resume or extend screen session and run again to
# import those env vars to the current environment.
#
keyme() {
  if [[ $TERM =~ "screen" ]]; then
    echo -n "Importing ssh agent - "
    if [ -s $HOME/.ssh/envs ]; then
      . $HOME/.ssh/envs
      echo "Success!"
    else
      echo "No envs file found."
    fi
  else
    echo -n "Exporting ssh agent - "
      # Courtesy of http://www.deadman.org/sshscreen.php
      SSHVARS="SSH_CLIENT SSH_TTY SSH_AUTH_SOCK SSH_CONNECTION DISPLAY"

      for x in ${SSHVARS} ; do
          (eval echo $x=\$$x) | sed  's/=/="/
                                      s/$/"/
                                      s/^/export /'
      done 1>$HOME/.ssh/envs

      echo "Success!"
  fi
}

# OSX: Run a command in a new terminal tab -- probably will blow up or something on nix's
# shamelessly nabbed from http://tomafro.net/2009/08/tip-open-new-tab-in-osx-terminal
tab () {
  osascript 2>/dev/null <<EOF
    tell application "System Events"
      tell process "Terminal" to keystroke "t" using command down
    end

    tell application "Terminal"
      activate
      do script with command "cd $PWD; $*" in window 1
    end tell
EOF
}

#
# Start up the rails dev environment in the current directory, again probably blows up on nix's
#
# Might be worth it to write some logic that encapsulates screen/osx commands into generics...
#
workflow () {
  tab rc         # start rails console in a new tab
  tab guard      # start guard in a new tab
  mvim .         # open up macvim in this directory -- auto-opens tabs for relevant rails folders
  rs             # start the rails server in this tab
}

[[ -s "/Users/robert/.rvm/scripts/rvm" ]] && source "/Users/robert/.rvm/scripts/rvm"
